<!DOCTYPE html>
<html class="no-js" lang="en-us">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Dipping Toes into Bash Scripting - Redowan&#39;s Musings</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
	<meta property="og:title" content="Dipping Toes into Bash Scripting" />
<meta property="og:description" content="Table of Contents  Introduction Shell History A Few Basic Commands  cd ls cat cp mv mkdir rm grep lp clear exit   Basic Scripting Examples  Running a Shell Script  conditionals (if-else) for loop while loop functions     External Resource  Introduction Okay, here&#39;s a confession. I&#39;m the type of person who never picks up a new skill unless I absolutely have to. Although I have been using Debian based Linux personally and professionally for over a year, my knowledge on the command line and bash scripting have hopelessly remained stuck in a local minimum." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://rednafi.github.io/red-blogs/post/brisk_bash/" />
<meta property="article:published_time" content="2019-09-05T00:00:00+00:00" />
<meta property="article:modified_time" content="2019-09-05T00:00:00+00:00" />

	<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Dipping Toes into Bash Scripting"/>
<meta name="twitter:description" content="Table of Contents  Introduction Shell History A Few Basic Commands  cd ls cat cp mv mkdir rm grep lp clear exit   Basic Scripting Examples  Running a Shell Script  conditionals (if-else) for loop while loop functions     External Resource  Introduction Okay, here&#39;s a confession. I&#39;m the type of person who never picks up a new skill unless I absolutely have to. Although I have been using Debian based Linux personally and professionally for over a year, my knowledge on the command line and bash scripting have hopelessly remained stuck in a local minimum."/>

	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">
	<link rel="stylesheet" href="/red-blogs/css/style.css">
	<link rel="stylesheet" href="/red-blogs/css/custom.css">
	<link rel="shortcut icon" href="/red-blogs/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container">
		<div class="logo">
			<a class="logo__link" href="/red-blogs" title="Redowan&#39;s Musings" rel="home">
				<div class="logo__title">Redowan&#39;s Musings</div>
				<div class="logo__tagline">Just another site</div>
			</a>
		</div>
		
<nav class="menu">
	<button class="menu__btn" aria-haspopup="true" aria-expanded="false" tabindex="0">
		<span class="menu__btn-title" tabindex="-1">Menu</span>
	</button>
	<ul class="menu__list">
		<li class="menu__item">
			<a class="menu__link" href="/red-blogs/about/">
				
				<span class="menu__text">About Hugo</span>
				
			</a>
		</li>
	</ul>
</nav>

	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Dipping Toes into Bash Scripting</h1>
			<div class="post__meta meta">
<div class="meta__item-datetime meta__item">
	<svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg>
	<time class="meta__text" datetime="2019-09-05T00:00:00">2019-09-05</time>
</div>
</div>
		</header><div class="content post__content clearfix">
			<p><img src="https://images.unsplash.com/photo-1518432031352-d6fc5c10da5a?ixlib=rb-1.2.1&amp;ixid=eyJhcHBfaWQiOjEyMDd9&amp;auto=format&amp;fit=crop&amp;w=1934&amp;q=80" alt="Example image"></p>
<h2 id="table-of-contents">Table of Contents</h2>
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#shell">Shell</a></li>
<li><a href="#history">History</a></li>
<li><a href="#a-few-basic-commands">A Few Basic Commands</a>
<ul>
<li><a href="#cd">cd</a></li>
<li><a href="#ls">ls</a></li>
<li><a href="#cat">cat</a></li>
<li><a href="#cp">cp</a></li>
<li><a href="#mv">mv</a></li>
<li><a href="#mkdir">mkdir</a></li>
<li><a href="#rm">rm</a></li>
<li><a href="#grep">grep</a></li>
<li><a href="#lp">lp</a></li>
<li><a href="#clear">clear</a></li>
<li><a href="#exit">exit</a></li>
</ul>
</li>
<li><a href="#basic-scripting-examples">Basic Scripting Examples</a>
<ul>
<li><a href="#running-a-shell-script">Running a Shell Script</a>
<ul>
<li><a href="#conditionals-if-else">conditionals (if-else)</a></li>
<li><a href="#for-loop">for loop</a></li>
<li><a href="#while-loop">while loop</a></li>
<li><a href="#functions">functions</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#external-resources">External Resource</a></li>
</ul>
<h2 id="introduction">Introduction</h2>
<p>Okay, here's a confession. I'm the type of person who never picks up a new skill unless I absolutely have to. Although I have been using Debian based Linux personally and professionally for over a year, my knowledge on the command line and bash scripting have hopelessly remained stuck in a local minimum. Sure, I know my way around the terminal but working as a data scientist didn't require me to know the nitty-gritty details of bash scripting. And also, I have this tendency of solving every sort of automation and scripting problem with python but often that extra layer of dependency is undesirable. So, as I have started to learn the syntax and quirks of shell language consciously, I thought why not document the whole process. That gave birth to this. Treat this as a beginner's guide to grasp the most necessary details of shell scripting to get the job done.</p>
<h2 id="shell">Shell</h2>
<p>Several layers of events take place whenever a Linux command is entered into the terminal. The top layer of that is known as <em>shell</em>.</p>
<p><code>A shell is any user interface to the UNIX operating system, i.e., any program that takes input from the user, translates it into instructions that the operating system can understand, and conveys the operating system's output back to the user.</code></p>
<p>Let's look at an example:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sort -n src/files/numbers.txt &gt; src/files/sorted_numbers.txt
</code></pre></div><p>This command will perform the following tasks:</p>
<ul>
<li>Go to the <code>src/files</code> directory</li>
<li>Sort the numbers in the <code>numbers.txt</code> files in ascending order</li>
<li>Save the result in a new file called <code>sorted_numbers.txt</code> in the same directory</li>
</ul>
<h2 id="history">History</h2>
<p>The first major shell was the Bourne shell (named after its inventor, Steven Bourne); it was included in the first popular version of UNIX, Version 7, starting in 1979. The Bourne shell is known on the system as <code>sh</code>. Although UNIX has gone through many, many changes, the Bourne shell is still popular and essentially unchanged. Several UNIX utilities and administration features depend on it.</p>
<p>Variants of some popular shells:</p>
<ul>
<li>C Shell or <code>csh</code> (The syntax has resemblance with C programming language)</li>
<li>Korn Shell or <code>ksh</code> (Similar to Bourne Shell with features from both Bourne and C Shell)</li>
<li>The Bourne Again Shell or BASH (Started with the GNU project in 1988.)</li>
</ul>
<p>BASH is going to be our primary focus here.</p>
<h2 id="a-few-basic-commands">A Few Basic Commands</h2>
<p>List of most frequently used commands. All of these commands can be run directly from a bash command prompt:</p>
<ul>
<li><code>cd</code></li>
<li><code>ls</code></li>
<li><code>cat</code></li>
<li><code>cp</code></li>
<li><code>mv</code></li>
<li><code>mkdir</code></li>
<li><code>rm</code></li>
<li><code>grep</code></li>
<li><code>lp</code></li>
</ul>
<p>All of the following command summaries can be found via:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">curl cheat.sh/&lt;prompt&gt;
</code></pre></div><h3 id="cd">cd</h3>
<p><code>cd</code> is used to change directory</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#Go to the given directory</span>
cd path/to/directory

<span style="color:#75715e">#Go to home directory of current user</span>
cd

<span style="color:#75715e">#Go up to the parent of the current directory</span>
cd ..

<span style="color:#75715e">#Go to the previously chosen directory</span>
cd -
</code></pre></div><h3 id="ls">ls</h3>
<p><code>ls</code> lists all the files and folders in a user-specified directory</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># Displays everything in the target directory</span>
ls path/to/the/target/directory

<span style="color:#75715e"># Displays everything including hidden files</span>
ls -a

<span style="color:#75715e"># Displays all files, along with the size (with unit suffixes) and timestamp</span>
ls -lh

<span style="color:#75715e"># Display files, sorted by size</span>
ls -S

<span style="color:#75715e"># Display directories only</span>
ls -d */

<span style="color:#75715e"># Display directories only, include hidden</span>
ls -d .*/ */
</code></pre></div><h3 id="cat">cat</h3>
<p><code>cat</code> shows the contents of a user-specified file</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># Display the contents of a file</span>
cat /path/to/foo

<span style="color:#75715e"># Display contents with line numbers</span>
cat -n /path/to/foo

<span style="color:#75715e"># Display contents with line numbers (blank lines excluded)</span>
cat -b /path/to/foo
</code></pre></div><h3 id="cp">cp</h3>
<p><code>cp</code> copies files or folders from one directory to another</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># Create a copy of a file</span>
cp ~/Desktop/foo.txt ~/Downloads/foo.txt

<span style="color:#75715e"># Create a copy of a directory</span>
cp -r ~/Desktop/cruise_pics/ ~/Pictures/

<span style="color:#75715e"># Create a copy but ask to overwrite if the destination file already exists</span>
cp -i ~/Desktop/foo.txt ~/Documents/foo.txt

<span style="color:#75715e"># Create a backup file with date</span>
cp foo.txt<span style="color:#f92672">{</span>,.<span style="color:#e6db74">&#34;</span><span style="color:#66d9ef">$(</span>date +%Y%m%d-%H%M%S<span style="color:#66d9ef">)</span><span style="color:#e6db74">&#34;</span><span style="color:#f92672">}</span>
</code></pre></div><h3 id="mv">mv</h3>
<p><code>mv</code> moves files or folders from one directory to another and can also be used to rename files or folders</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># Move a file from one place to another</span>
mv ~/Desktop/foo.txt ~/Documents/foo.txt

<span style="color:#75715e"># Move a file from one place to another and automatically overwrite if the destination file exists</span>
<span style="color:#75715e"># (This will override any previous -i or -n args)</span>
mv -f ~/Desktop/foo.txt ~/Documents/foo.txt

<span style="color:#75715e"># Move a file from one place to another but ask before overwriting an existing file</span>
<span style="color:#75715e"># (This will override any previous -f or -n args)</span>
mv -i ~/Desktop/foo.txt ~/Documents/foo.txt

<span style="color:#75715e"># Move a file from one place to another but never overwrite anything</span>
<span style="color:#75715e"># (This will override any previous -f or -i args)</span>
mv -n ~/Desktop/foo.txt ~/Documents/foo.txt

<span style="color:#75715e"># Move listed files to a directory</span>
mv -t ~/Desktop/ file1 file2 file3
</code></pre></div><h3 id="mkdir">mkdir</h3>
<p><code>mkdir</code> is used to create a folder in a directory</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># Create a directory and all its parents</span>
mkdir -p foo/bar/baz

<span style="color:#75715e"># Create foo/bar and foo/baz directories</span>
mkdir -p foo/<span style="color:#f92672">{</span>bar,baz<span style="color:#f92672">}</span>

<span style="color:#75715e"># Create the foo/bar, foo/baz, foo/baz/zip and foo/baz/zap directories</span>
mkdir -p foo/<span style="color:#f92672">{</span>bar,baz/<span style="color:#f92672">{</span>zip,zap<span style="color:#f92672">}</span><span style="color:#f92672">}</span>
</code></pre></div><h3 id="rm">rm</h3>
<p><code>rm</code> is mainly used to delete files or folders</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># Remove files and subdirs</span>
rm -rf path/to/the/target/

<span style="color:#75715e"># Ignore non existent files</span>
rm -f path/to/the/target

<span style="color:#75715e"># Remove a file with his inode</span>
find /tmp/ -inum <span style="color:#ae81ff">6666</span> -exec rm -i <span style="color:#e6db74">&#39;{}&#39;</span> <span style="color:#ae81ff">\;</span>
</code></pre></div><h3 id="grep">grep</h3>
<p><code>grep</code> can be used to search through the output of another command</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># Search a file for a pattern</span>
grep pattern file

<span style="color:#75715e"># Case insensitive search (with line numbers)</span>
grep -in pattern file

<span style="color:#75715e"># Recursively grep for string &lt;pattern&gt; in folder:</span>
grep -R pattern folder

<span style="color:#75715e"># Read search patterns from a file (one per line)</span>
grep -f pattern_file file

<span style="color:#75715e"># Find lines NOT containing pattern</span>
grep -v pattern file

<span style="color:#75715e"># You can grep with regular expressions</span>
grep <span style="color:#e6db74">&#34;^00&#34;</span> file  <span style="color:#75715e">#Match lines starting with 00</span>
grep -E <span style="color:#e6db74">&#34;[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}&#34;</span> file  <span style="color:#75715e">#Find IP add</span>

<span style="color:#75715e"># Find all files which match {pattern} in {directory}</span>
<span style="color:#75715e"># This will show: &#34;file:line my research&#34;</span>
grep -rnw <span style="color:#e6db74">&#39;directory&#39;</span> -e <span style="color:#e6db74">&#34;pattern&#34;</span>

<span style="color:#75715e"># Exclude grep from your grepped output of ps.</span>
<span style="color:#75715e"># Add [] to the first letter. Ex: sshd -&gt; [s]shd</span>
ps aux | grep <span style="color:#e6db74">&#39;[h]ttpd&#39;</span>

<span style="color:#75715e"># Colour in red {bash} and keep all other lines</span>
ps aux | grep -E --color <span style="color:#e6db74">&#39;bash|$&#39;</span>
</code></pre></div><h3 id="lp">lp</h3>
<p><code>lp</code> prints the specified output via an available printer</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># lp</span>
<span style="color:#75715e"># Print files.</span>

<span style="color:#75715e"># Print the output of a command to the default printer (see `lpstat` command):</span>
echo <span style="color:#e6db74">&#34;test&#34;</span> | lp

<span style="color:#75715e"># Print a file to the default printer:</span>
lp path/to/filename

<span style="color:#75715e"># Print a file to a named printer (see `lpstat` command):</span>
lp -d printer_name path/to/filename

<span style="color:#75715e"># Print N copies of a file to the default printer (replace N with the desired number of copies):</span>
lp -n N path/to/filename

<span style="color:#75715e"># Print only certain pages to the default printer (print pages 1, 3-5, and 16):</span>
lp -P 1,3-5,16 path/to/filename

<span style="color:#75715e"># Resume printing a job:</span>
lp -i job_id -H resume
</code></pre></div><h3 id="clear">clear</h3>
<p><code>clear</code> is used to clear the CLI window</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># clear</span>
<span style="color:#75715e"># Clears the screen of the terminal.</span>

<span style="color:#75715e"># Clear the screen (equivalent to typing Control-L when using the bash shell):</span>
clear
</code></pre></div><h3 id="exit">exit</h3>
<p><code>exit</code> closes the CLI window</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># exit</span>
<span style="color:#75715e"># Quit the current CMD instance or the current batch file.</span>
<span style="color:#75715e"># More information:</span>
<span style="color:#75715e">#&lt;https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/exit&gt;.</span>

<span style="color:#75715e"># Quit the current CMD instance:</span>
exit

<span style="color:#75715e"># Quit the current batch script:</span>
exit /b

<span style="color:#75715e"># Quit using a specific exit code:</span>
exit exit_code
</code></pre></div><h2 id="basic-scripting-examples">Basic Scripting Examples</h2>
<p>When you need to execute multiple shell commands sequentially or want to do more complex stuffs, it's better to enclose the commands in a bash script.</p>
<h3 id="running-a-shell-script">Running a Shell Script</h3>
<ul>
<li>
<p>Create a file with <code>.sh</code> extension. I have used Ubuntu's built-in <code>nano</code> editor for that.</p>
<pre><code>$ nano script.sh
</code></pre></li>
<li>
<p>Put your code in the <code>.sh</code> file</p>
</li>
<li>
<p>Make sure you put the shebang <code>#!/bin/bash</code> at the beginning of each script, otherwise, the system wouldn't know which interpreter to use.</p>
</li>
<li>
<p>Give permission to run:</p>
<pre><code>$ chmod +x script.sh
</code></pre></li>
<li>
<p>Run the script via:</p>
<pre><code>$ ./script
</code></pre></li>
<li>
<p>If the script takes in one or multiple arguments, then place those with spaces in between.</p>
<pre><code>$ ./script arg1 arg2
</code></pre></li>
</ul>
<h3 id="conditionals-ifelse">conditionals (if-else)</h3>
<ul>
<li>
<p><strong>Example-1:</strong> This program,</p>
<ul>
<li>Takes in two integers as arguments</li>
<li>Compares if one number is greater than the other or if they are equal</li>
<li>Returns the greater of the two numbers or if they are equal, returns equal</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#!/bin/bash
</span><span style="color:#75715e"></span>
<span style="color:#75715e"># bash strict mode for easier debugging</span>
set -euo pipefail

number1<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span>$1<span style="color:#e6db74">&#34;</span>
number2<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span>$2<span style="color:#e6db74">&#34;</span>
<span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> $number1 -eq $number2 <span style="color:#f92672">]</span>
<span style="color:#66d9ef">then</span>
    echo <span style="color:#e6db74">&#34;The numbers are equal&#34;</span>

<span style="color:#66d9ef">elif</span> <span style="color:#f92672">[</span> $number1 -gt $number2 <span style="color:#f92672">]</span>
<span style="color:#66d9ef">then</span>
    echo <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">The greater number is </span>$number1<span style="color:#e6db74">&#34;</span>

<span style="color:#66d9ef">elif</span> <span style="color:#f92672">[</span> $number2 -gt $number1 <span style="color:#f92672">]</span>
<span style="color:#66d9ef">then</span>
    echo <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">The greater number is </span>$number2<span style="color:#e6db74">&#34;</span>
<span style="color:#66d9ef">fi</span>
</code></pre></div><pre><code>$ ./script.sh 12 13
The greater number is 13
</code></pre></li>
<li>
<p><strong>Example-2:</strong> This program,</p>
<ul>
<li>Takes a single number as an argument</li>
<li>Checks whether the number is Odd or Even</li>
<li>Returns Odd or Even accordingly</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#!/bin/bash
</span><span style="color:#75715e"></span>
<span style="color:#75715e"># bash strict mode for easier debugging</span>
set -euo pipefail

number<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span>$1<span style="color:#e6db74">&#34;</span>
<span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> <span style="color:#66d9ef">$((</span> number%2 <span style="color:#66d9ef">))</span> -eq <span style="color:#ae81ff">0</span> <span style="color:#f92672">]</span>
<span style="color:#66d9ef">then</span>
    echo <span style="color:#e6db74">&#34;Even&#34;</span>
<span style="color:#66d9ef">else</span>
    echo <span style="color:#e6db74">&#34;Odd&#34;</span>
<span style="color:#66d9ef">fi</span>
</code></pre></div><pre><code>$ ./script.sh 20
Even
</code></pre></li>
<li>
<p><strong>Example-3:</strong> This program,</p>
<ul>
<li>Takes in two integers and an operation instruction</li>
<li>Returns the value according to the operation</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#!/bin/bash
</span><span style="color:#75715e"></span>
<span style="color:#75715e"># bash strict mode for easier debugging</span>
set -euo pipefail

echo <span style="color:#e6db74">&#34;Enter two numbers and the intended operation:
</span><span style="color:#e6db74">* for addition, write add
</span><span style="color:#e6db74">* for subtraction, write sub
</span><span style="color:#e6db74">* for multiplication, write mul
</span><span style="color:#e6db74">* for division, write div
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">(write quit to quit the program)&#34;</span>

num1<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span>$1<span style="color:#e6db74">&#34;</span>
num2<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span>$2<span style="color:#e6db74">&#34;</span>
operation<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span>$3<span style="color:#e6db74">&#34;</span>

<span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> $num1 <span style="color:#f92672">=</span><span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;quit&#34;</span> <span style="color:#f92672">]</span>
<span style="color:#66d9ef">then</span>
    break

    <span style="color:#66d9ef">elif</span> <span style="color:#f92672">[</span> $operation <span style="color:#f92672">=</span><span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;add&#34;</span> <span style="color:#f92672">]</span>
    <span style="color:#66d9ef">then</span>
        ans<span style="color:#f92672">=</span><span style="color:#66d9ef">$((</span> $num1 <span style="color:#f92672">+</span> $num2 <span style="color:#66d9ef">))</span>
        echo <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">addition: </span>$ans<span style="color:#e6db74">&#34;</span>

    <span style="color:#66d9ef">elif</span> <span style="color:#f92672">[</span> $operation <span style="color:#f92672">=</span><span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;sub&#34;</span> <span style="color:#f92672">]</span>
    <span style="color:#66d9ef">then</span>
        ans<span style="color:#f92672">=</span><span style="color:#66d9ef">$((</span> $num1 <span style="color:#f92672">-</span> $num2 <span style="color:#66d9ef">))</span>
        echo <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">subtraction: </span>$ans<span style="color:#e6db74">&#34;</span>

    <span style="color:#66d9ef">elif</span> <span style="color:#f92672">[</span> $operation <span style="color:#f92672">=</span><span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;mul&#34;</span> <span style="color:#f92672">]</span>
    <span style="color:#66d9ef">then</span>
        ans<span style="color:#f92672">=</span><span style="color:#66d9ef">$((</span> $num1 <span style="color:#f92672">*</span> $num2 <span style="color:#66d9ef">))</span>
        echo <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">multiplication: </span>$ans<span style="color:#e6db74">&#34;</span>

    <span style="color:#66d9ef">elif</span> <span style="color:#f92672">[</span> $operation <span style="color:#f92672">=</span><span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;div&#34;</span> <span style="color:#f92672">]</span>
    <span style="color:#66d9ef">then</span>
        ans<span style="color:#f92672">=</span><span style="color:#66d9ef">$((</span> $num1 <span style="color:#f92672">/</span> $num2 <span style="color:#66d9ef">))</span>
        echo <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">division: </span>$ans<span style="color:#e6db74">&#34;</span>

<span style="color:#66d9ef">fi</span>
</code></pre></div><pre><code>$ ./script.sh 12 13 add
25
</code></pre></li>
</ul>
<h3 id="for-loop">for loop</h3>
<ul>
<li>
<p><strong>Example-1:</strong> Looping through 0 to 9 with increment 3 and printing the numbers</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#!/bin/bash
</span><span style="color:#75715e"></span>
<span style="color:#75715e"># bash strict mode for easier debugging</span>
set -euo pipefail

<span style="color:#66d9ef">for</span> var in <span style="color:#f92672">{</span>0..9..3<span style="color:#f92672">}</span>
<span style="color:#66d9ef">do</span>
    echo $var
<span style="color:#66d9ef">done</span>
</code></pre></div><pre><code>$ ./script.sh
0
3
6
9
</code></pre></li>
<li>
<p><strong>Example-2:</strong> Looping through files in a folder and printing them one by one</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#!/bin/bash
</span><span style="color:#75715e"></span>
<span style="color:#75715e"># bash strict mode for easier debugging</span>
set -euo pipefail

<span style="color:#66d9ef">for</span> file in <span style="color:#66d9ef">$(</span>ls ./files<span style="color:#66d9ef">)</span>
<span style="color:#66d9ef">do</span>
    echo $file
<span style="color:#66d9ef">done</span>
</code></pre></div><pre><code>$ ./script.sh
numbers.txt
sorted_numbers.txt
</code></pre></li>
<li>
<p><strong>Example-3:</strong> This program,</p>
<ul>
<li>Doesn't take any argument</li>
<li>Returns the summation of all the integers, starting from 0, up to 100</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#!/bin/bash
</span><span style="color:#75715e"></span>
<span style="color:#75715e"># bash strict mode for easier debugging</span>
set -euo pipefail

sum<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>
<span style="color:#66d9ef">for</span> num in <span style="color:#66d9ef">$(</span>seq <span style="color:#ae81ff">0</span> 100<span style="color:#66d9ef">)</span>
<span style="color:#66d9ef">do</span>
    sum<span style="color:#f92672">=</span><span style="color:#66d9ef">$((</span>$sum <span style="color:#f92672">+</span> $num<span style="color:#66d9ef">))</span>
<span style="color:#66d9ef">done</span>
echo <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">Total sum is </span>$sum<span style="color:#e6db74">&#34;</span>
</code></pre></div><pre><code>$ ./script.sh
Total sum is 5050
</code></pre></li>
<li>
<p><strong>Example-4:</strong> This program,</p>
<ul>
<li>Takes in an integer as an argument</li>
<li>Prints all the numbers up to that number, starting from 0</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#!/bin/bash
</span><span style="color:#75715e"></span>
<span style="color:#75715e"># bash strict mode for easier debugging</span>
set -euo pipefail

input_number<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span>$1<span style="color:#e6db74">&#34;</span>
<span style="color:#66d9ef">for</span> num in <span style="color:#66d9ef">$(</span>seq <span style="color:#ae81ff">0</span> $input_number<span style="color:#66d9ef">)</span>
<span style="color:#66d9ef">do</span>
<span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> $num -lt $input_number <span style="color:#f92672">]</span>
<span style="color:#66d9ef">then</span>
    echo $num
<span style="color:#66d9ef">fi</span>
<span style="color:#66d9ef">done</span>
</code></pre></div><pre><code>$ ./script.sh 100
0
1
.
.
99
</code></pre></li>
</ul>
<h3 id="while-loop">while loop</h3>
<ul>
<li>
<p><strong>Example-1:</strong> This program,</p>
<ul>
<li>Takes in a single integer as an argument</li>
<li>Returns the factorial of that number</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#!/bin/bash
</span><span style="color:#75715e"></span>
<span style="color:#75715e"># bash strict mode for easier debugging</span>
set -euo pipefail

counter<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span>$1<span style="color:#e6db74">&#34;</span>
factorial<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>
<span style="color:#66d9ef">while</span> <span style="color:#f92672">[</span> $counter -gt <span style="color:#ae81ff">0</span> <span style="color:#f92672">]</span>
<span style="color:#66d9ef">do</span>
factorial<span style="color:#f92672">=</span><span style="color:#66d9ef">$((</span> $factorial <span style="color:#f92672">*</span> $counter <span style="color:#66d9ef">))</span>
counter<span style="color:#f92672">=</span><span style="color:#66d9ef">$((</span> $counter <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span> <span style="color:#66d9ef">))</span>
<span style="color:#66d9ef">done</span>
echo <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">Factorial of </span>$1<span style="color:#e6db74"> is </span>$factorial<span style="color:#e6db74">&#34;</span>
</code></pre></div><pre><code>$ ./script.sh 5
Factorial of 5 is 120
</code></pre></li>
<li>
<p><strong>Example-2:</strong> This program,</p>
<ul>
<li>Takes two integers as arguments</li>
<li>Returns the summation of the numbers</li>
<li>Sending <code>-1</code> as an input quits the program</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#!/bin/bash
</span><span style="color:#75715e"></span>
<span style="color:#75715e"># bash strict mode for easier debugging</span>
set -euo pipefail

<span style="color:#66d9ef">while</span> :
<span style="color:#66d9ef">do</span>
    read -p <span style="color:#e6db74">&#34;Enter two numbers ( - 1 to quit ) : &#34;</span> <span style="color:#e6db74">&#34;a&#34;</span> <span style="color:#e6db74">&#34;b&#34;</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> $a -eq -1 <span style="color:#f92672">]</span>
    <span style="color:#66d9ef">then</span>
        break
    <span style="color:#66d9ef">fi</span>
    ans<span style="color:#f92672">=</span><span style="color:#66d9ef">$((</span> $a <span style="color:#f92672">+</span> $b <span style="color:#66d9ef">))</span>
    echo $ans
<span style="color:#66d9ef">done</span>
</code></pre></div><pre><code>$ ./script.sh
Enter two numbers (-1 to quit): 20 30
30
</code></pre></li>
<li>
<p><strong>Example-3:</strong> This program,</p>
<ul>
<li>Takes in a text filepath as argument</li>
<li>Reads and prints out each line of the file</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#!/bin/bash
</span><span style="color:#75715e"></span>
<span style="color:#75715e"># bash strict mode for easier debugging</span>
set -euo pipefail

file<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span>$1<span style="color:#e6db74">&#34;</span>

<span style="color:#66d9ef">while</span> read -r line
<span style="color:#66d9ef">do</span>
    echo <span style="color:#e6db74">&#34;</span>$line<span style="color:#e6db74">&#34;</span>
<span style="color:#66d9ef">done</span> &lt; <span style="color:#e6db74">&#34;</span>$file<span style="color:#e6db74">&#34;</span>
</code></pre></div><pre><code>$ ./script.sh files/numbers.txt
5
55
.
.
11
10
</code></pre></li>
</ul>
<h3 id="functions">functions</h3>
<p>Functions are incredible tools when we need to reuse code. Creating functions are fairly straight
forward in bash.</p>
<ul>
<li>
<p><strong>Example-1:</strong> This function,</p>
<ul>
<li>Takes a directory as an input argument</li>
<li>Counts the number of files in that directory and prints that out</li>
<li>Note that this function ignores the dot files (The <code>ls -1</code> flag ignores dot files)</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#!/bin/bash
</span><span style="color:#75715e"></span>
<span style="color:#75715e"># bash strict mode for easier debugging</span>
set -euo pipefail

<span style="color:#75715e"># declaring the function</span>
file_count <span style="color:#f92672">(</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    ls -1 <span style="color:#e6db74">&#34;</span>$1<span style="color:#e6db74">&#34;</span> | wc -l
<span style="color:#f92672">}</span>

<span style="color:#75715e"># calling the function</span>
echo <span style="color:#66d9ef">$(</span> file_count $1 <span style="color:#66d9ef">)</span>
</code></pre></div><pre><code>$ ./script.sh ./files
$ 2
</code></pre></li>
<li>
<p><strong>Example-2:</strong> This function,</p>
<ul>
<li>
<p>Takes in a shortcode for any of the following languages
(a) <code>en</code> for English
(b) <code>fr</code> for French
(c) <code>bn</code> for bangla</p>
</li>
<li>
<p>Returns a welcome message in the selected language</p>
</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#!/bin/bash
</span><span style="color:#75715e"></span>
<span style="color:#75715e"># bash strict mode for easier debugging</span>
set -euo pipefail

<span style="color:#75715e"># declaring the function</span>
greetings <span style="color:#f92672">(</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    language<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span>$1<span style="color:#e6db74">&#34;</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> $language <span style="color:#f92672">=</span><span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;en&#34;</span> <span style="color:#f92672">]</span>
    <span style="color:#66d9ef">then</span>
        echo <span style="color:#e6db74">&#34;Greetings Mortals!&#34;</span>
        <span style="color:#66d9ef">elif</span> <span style="color:#f92672">[</span> $language <span style="color:#f92672">=</span><span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;fr&#34;</span> <span style="color:#f92672">]</span>
        <span style="color:#66d9ef">then</span>
            echo <span style="color:#e6db74">&#34;Salutations Mortels!&#34;</span>
        <span style="color:#66d9ef">elif</span> <span style="color:#f92672">[</span> $language <span style="color:#f92672">=</span><span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;bn&#34;</span> <span style="color:#f92672">]</span>
        <span style="color:#66d9ef">then</span>
            echo <span style="color:#e6db74">&#34;নশ্বরকে শুভেচ্ছা!&#34;</span>
    <span style="color:#66d9ef">fi</span>

<span style="color:#f92672">}</span>

<span style="color:#75715e"># calling the function</span>
echo <span style="color:#66d9ef">$(</span> greetings $1 <span style="color:#66d9ef">)</span>
</code></pre></div><pre><code>$ ./script.sh en
Greetings Mortals!
</code></pre></li>
<li>
<p><strong>Example-3:</strong> This function,</p>
<ul>
<li>Takes a directory as an argument</li>
<li>Loop through the files</li>
<li>Only returns the text files with full path</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#!/bin/bash
</span><span style="color:#75715e"></span>
<span style="color:#75715e"># bash strict mode for easier debugging</span>
set -euo pipefail

<span style="color:#75715e"># declaring the function</span>
return_text <span style="color:#f92672">(</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
dir<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span>$1<span style="color:#e6db74">&#34;</span>
<span style="color:#66d9ef">for</span> file in $dir<span style="color:#e6db74">&#34;/*.txt&#34;</span>
<span style="color:#66d9ef">do</span>
    echo <span style="color:#e6db74">&#34;</span><span style="color:#66d9ef">$(</span> realpath $file <span style="color:#66d9ef">)</span><span style="color:#e6db74">&#34;</span>
<span style="color:#66d9ef">done</span>

<span style="color:#f92672">}</span>

echo <span style="color:#e6db74">&#34;</span><span style="color:#66d9ef">$(</span> return_text $1 <span style="color:#66d9ef">)</span><span style="color:#e6db74">&#34;</span>
</code></pre></div><pre><code>$ ./script.sh
/home/redowan/code/bash/files/numbers.txt
/home/redowan/code/bash/files/sorted_numbers.txt
</code></pre></li>
</ul>
<h2 id="some-good-practices">Some Good Practices</h2>
<h3 id="use-a-bash-strict-mode">Use a Bash Strict Mode</h3>
<p>Your bash scripts will be more robust, reliable and easy to debug if it starts with:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#!/bin/bash
</span><span style="color:#75715e"></span>set -euo pipefail
</code></pre></div><p>This can be regarded as an unofficial <strong>bash strict mode</strong> and often prevents many classes of sneaky bugs in your script. The above command can be synthesized into multiple commands.</p>
<p><code>set -euo pipefail</code> is short for:</p>
<pre><code>set -e
set -u
set -o pipefail
</code></pre><p>Let's have a look at each of them separately.</p>
<ul>
<li>
<p><strong>set-e:</strong> This instruction forces the bash script to exit immediately if any command has a non zero exit status. If there is an issue in any of the lines in your code, the subsequent lines simply won't run.</p>
</li>
<li>
<p><strong>set-u:</strong> If your code has a reference to any variable that wasn't defined previously, this will cause the program to exit.</p>
</li>
<li>
<p><strong>set -o pipefail:</strong> This setting prevents errors in a pipeline being masked. If any command in a pipeline fails, that return code will be used as the return code of the whole pipeline, not the last command's return code.</p>
</li>
</ul>
<p>For a more in depth explanation of the different settings and Bash Strict Mode in general, check out, <a href="http://redsymbol.net/articles/unofficial-bash-strict-mode/">AAron Maxwell's blog</a> on this topic.</p>
<h3 id="double-quote-your-variables">Double Quote Your Variables</h3>
<p>It is generally a good practice to double quote your variables, specially user input variables where spaces are involved.</p>
<h2 id="external-resources">External Resources</h2>
<p>Here are some awesome sources where you can always look into if you get stuck:</p>
<ul>
<li><a href="https://learnpythonthehardway.org/book/appendixa.html">Command Line Crash Course</a></li>
<li><a href="https://ryanstutorials.net/bash-scripting-tutorial/">Ryans Bash Tutorial</a></li>
<li><a href="https://www.w3schools.com/whatis/whatis_cli.asp">W3 School CLI Tutorial</a></li>
</ul>

		</div>
	</article>
</main>


<nav class="post-nav flex">
	<div class="post-nav__item post-nav__item--prev">
		<a class="post-nav__link" href="/red-blogs/post/mysql_linux/" rel="prev"><span class="post-nav__caption">«&thinsp;Previous</span><p class="post-nav__post-title">Brisk Guide to Set Up MySQL on Linux</p></a>
	</div>
	<div class="post-nav__item post-nav__item--next">
		<a class="post-nav__link" href="/red-blogs/post/zsh_installation/" rel="next"><span class="post-nav__caption">Next&thinsp;»</span><p class="post-nav__post-title">A Minimalistic Approach to Zsh</p></a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2019 Redowan Delowar.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
	</div>
<script async defer src="/red-blogs/js/menu.js"></script>
<script src="/red-blogs/js/custom.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=TeX-AMS-MML_HTMLorMML" async></script>
</body>
</html>
